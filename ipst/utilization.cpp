#include<bits/stdc++.h>
using namespace std;
const int N = 1005;
const int M = 5005;
int dp[N][M];
int pre[N][M];
int sum[N][M];
int main()
{
    int m,n,K,x,q;
    scanf("%d %d %d",&m,&n,&K);
    for(int i=1;i<=n;i++)
    {
        int l;
        scanf("%d",&l);
        int cur = 1;
        for(int j=0;j<l;j++)
        {
            scanf("%d %d",&x,&q);
            while(cur<=x)   pre[i][cur] = pre[i][cur-1],sum[i][cur] = sum[i][cur-1],++cur;
            pre[i][x]+=q*x;
            sum[i][x] += q;
        }
        while(cur<=m)   pre[i][cur] = pre[i][cur-1],sum[i][cur] = sum[i][cur-1],++cur;
    }
    for(int i=1;i<=n;i++)
    {
        for(int j=0;j<=m;j++)
        {
            for(int k=0;k<=j;k++)
            {
                dp[i][j] = max(dp[i][j],dp[i-1][j-k]+pre[i][k]+(K-sum[i][k])*k);
            }
            printf("%d %d %d\n",i,j,dp[i][j]);
        }
    }
    printf("%lf\n",(double)dp[n][m]/(double)K);
    return 0;
}
/*
........##################.................####################
........##################.................####################
........######..............................................###
........######............................................###..
........######..........................................###....
........##################............................###......
........##################..........................###........
........##################........................###..........
........######..................................###............
........######................................###..............
........######..............................###................
........##################.................####################
........##################.................####################
...............................................................
...............................................................
........##################.................####################
........##################.................####################
........####...............................####................
........####...............................####................
........####...............................####................
........####..........####.................####............####
........####..........####.................####............####
........####.........#####.................####...........#####
........####..........####.................####............####
........####..........####.................####............####
........##################.................####################
........##################.................####################



*/
